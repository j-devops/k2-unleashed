# K2 Pro System Monitor Configuration
# Add this to your printer.cfg with: [include system_monitor.cfg]

[system_monitor]
# Update interval for status aggregation (seconds)
# Only used when data is stale and needs refresh
update_interval: 0.5

# Safe query mode - use cached data during printing to prevent timing issues
# This prevents the monitor from interfering with print quality on sensitive systems
# Recommended: True (default)
safe_query_mode: True

# Persist errors to log file
persist_errors: True

# Error log file path
error_log_path: /usr/data/printer_data/logs/system_errors.jsonl

# How it works:
# - When NOT printing: Status is queried normally and cache is updated
# - When printing: Cached status is returned to avoid blocking the motion system
# - Cache is automatically refreshed when safe (idle/paused states)
# - All queries are non-blocking with fallback to cached data on errors

# G-code commands available:
# - SYSTEM_STATUS: Display complete system status
# - LOG_ERROR CODE=E999 MSG='custom error': Log a custom error
# - SHOW_ERRORS LIMIT=10: Show recent errors

# Webhook endpoints (for web UI):
# - system_monitor/status: Get current status (JSON)
# - system_monitor/errors: Get error history (JSON)
# - system_monitor/log_error: Log an error via API
# - system_monitor/clear_errors: Clear error history
